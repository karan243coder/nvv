"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7030],{7030:function(e,s,t){t.d(s,{Z:function(){return h}});var l=t(7437),r=t(2265),n=t(4449),a=t(6042),c=t(6564),i=t(2455),o=t(610),u=t(6474);let d=r.forwardRef((e,s)=>{let{className:t,value:r,...n}=e;return(0,l.jsx)(o.fC,{ref:s,className:(0,u.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:(0,l.jsx)(o.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});d.displayName=o.fC.displayName;var m=t(9376),x=t(9391),f=t(653);function h(e){let{uid:s,isFree:t,onClose:o}=e,u=(0,m.useRouter)(),[h,j]=(0,r.useState)(null),[w,p]=(0,r.useState)(0),[v,g]=(0,r.useState)(!1),{setIsLoginOpen:N,dict:b}=(0,c.G)(),{toastError:y}=(0,i._)(),k=(0,r.useRef)(null),z=(0,r.useRef)(0),I=()=>{k.current&&clearInterval(k.current),z.current=h.time_need,p(C()),k.current=setInterval(()=>{z.current-=1,z.current<=0&&(g(!0),z.current=5),z.current%5==0&&_();let e=C();e>=100&&(clearInterval(k.current),e=100),p(e)},1e3)},_=()=>{(0,a.sA)(s,e=>{e.status>0&&sessionStorage.removeItem("current_uid"),2==e.status&&(k.current&&clearInterval(k.current),sessionStorage.removeItem(s)),-2==e.status&&(k.current&&clearInterval(k.current),sessionStorage.removeItem(s),y(b.myPhotos.cantProcess),setTimeout(()=>{window.location.href="/".concat("en"==b.lang?"":b.lang)},5e3)),j(e)},e=>{y(e)})};(0,r.useEffect)(()=>{h&&(2==h.status?k.current&&clearInterval(k.current):I())},[h]),(0,r.useEffect)(()=>(_(),()=>{k.current&&clearInterval(k.current)}),[]);let C=()=>100*((h.estimated_time-z.current)/h.estimated_time).toFixed(3),V=e=>{let s=e.replace(/^https:\/\/cdn\.undresswith\.ai\//,"");u.push("/".concat(b.lang,"/undress_video?path=").concat(btoa(s)))},A=e=>{let s=e.replace(/^https:\/\/cdn\.undresswith\.ai\//,"");u.push("/".concat(b.lang,"/image-upscaler?path=").concat(btoa(s)))},P=e=>{let s=e.replace(/^https:\/\/cdn\.undresswith\.ai\//,"");u.push("/".concat(b.lang,"/undress-ai?path=").concat(btoa(s))),window.scrollTo({top:0,behavior:"smooth"}),o&&o()};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"fixed inset-0 z-[9999] top-0 left-0 w-full h-full bg-black/90 animate-in zoom-in-50 gap-2 p-4 flex flex-col items-center justify-between overflow-hidden overscroll-none touch-none",children:[(0,l.jsxs)("div",{className:"flex flex-row justify-end items-center w-full",children:[h&&2==h.status&&(0,l.jsx)("div",{className:"pl-2 text-sm text-red-500 font-bold text-center w-full",children:b.myPhotos.autoDelete}),(0,l.jsx)(n.z,{variant:"ghost",className:"p-2 rounded-full hover:bg-gray-800",onClick:()=>{j(null),t&&u.push("/".concat("en"==b.lang?"":b.lang)),k.current&&clearInterval(k.current),o&&o()},children:(0,l.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,l.jsx)("path",{d:"M18 6L6 18",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M6 6L18 18",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),h&&(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full min-h-0 flex-1",children:[h.results.length>1?(0,l.jsxs)(x.x,{className:"w-full h-full whitespace-nowrap",children:[(0,l.jsx)("div",{className:"flex w-max space-x-4 p-4 h-[80vh]",children:h.results.map((e,s)=>(0,l.jsxs)("div",{className:"h-full flex flex-col items-center justify-center",children:[(0,l.jsx)("img",{className:"h-5/6 w-auto object-contain",src:e}),(0,l.jsxs)("div",{className:"w-full mt-2 flex flex-row items-center justify-between gap-2",children:[(0,l.jsx)(n.z,{size:"sm",className:"flex-1",onClick:()=>V(e),children:b.undressAI.createVideo}),(0,l.jsxs)("a",{href:e,download:!0,target:"_blank",className:"flex-1 flex items-center justify-center text-sm px-2 h-8 bg-background rounded-md border",children:[(0,l.jsx)(f._8t,{className:"size-4 mr-1"}),b.save]})]}),(0,l.jsxs)("div",{className:"w-full mt-2 flex flex-row items-center justify-between gap-2",children:[(0,l.jsx)(n.z,{size:"sm",className:"flex-1",onClick:()=>A(e),children:b.undressAI.upscaleImage}),(0,l.jsx)(n.z,{size:"sm",className:"flex-1",onClick:()=>P(e),children:b.undressAI.continueEdit})]})]},s))}),(0,l.jsx)(x.B,{orientation:"horizontal"})]}):(0,l.jsxs)("div",{className:"relative w-full h-4/6",children:[(0,l.jsx)("img",{className:"w-full h-full object-contain",src:h.url}),t&&2==h.status&&(0,l.jsx)("div",{className:"absolute w-full h-full top-0 left-0 flex items-center justify-center text-xl font-bold text-primary",children:(0,l.jsxs)("div",{className:"p-4 flex flex-col items-center justify-center rounded-lg bg-gray-100/80 cursor-pointer",onClick:()=>{N(!0)},children:[(0,l.jsx)("svg",{className:"h-10 w-10",viewBox:"0 0 1024 1024",children:(0,l.jsx)("path",{d:"M773.3 437.3v-112S773.3 64 512 64 250.7 325.3 250.7 325.3v112h-112V960h746.6V437.3h-112z m-224 288.4V848h-74.7V725.7c-22.2-12.9-37.3-36.8-37.3-64.3 0-41.3 33.5-74.7 74.7-74.7s74.7 33.4 74.7 74.7c0 27.5-15.2 51.3-37.4 64.3m149.4-288.4H325.3V325.8c0.4-31.3 11.4-187.1 186.7-187.1s186.2 155.9 186.7 186.7v111.9z",fill:"#F97316","p-id":"31206"})}),b.myPhotos.loginToView]})})]}),2==h.status?(0,l.jsx)("div",{className:"w-full flex flex-row items-center justify-around",children:t?(0,l.jsxs)("div",{className:"mt-4 flex flex-col items-center justify-center",children:[(0,l.jsx)("div",{className:"px-4 text-center font-bold text-white",children:b.myPhotos.loginToUse2}),(0,l.jsx)(n.z,{className:"mt-2 w-4/5 min-w-[200px]",onClick:()=>N(!0),children:b.myPhotos.loginToView})]}):h.results.length<=1&&(0,l.jsxs)("div",{className:"w-full flex flex-col items-center justify-center",children:[(0,l.jsxs)("div",{className:"w-full mt-2 flex flex-row items-center justify-between gap-2",children:[(0,l.jsx)(n.z,{size:"sm",className:"flex-1",onClick:()=>V(h.url),children:b.undressAI.createVideo}),(0,l.jsxs)("a",{href:h.url,download:!0,target:"_blank",className:"flex-1 flex items-center justify-center px-2 h-8 bg-background rounded-md border",children:[(0,l.jsx)(f._8t,{className:"size-4 mr-2"})," ",b.save]})]}),(0,l.jsxs)("div",{className:"w-full mt-2 flex flex-row items-center justify-between gap-2",children:[(0,l.jsx)(n.z,{size:"sm",className:"flex-1",onClick:()=>A(h.url),children:b.undressAI.upscaleImage}),(0,l.jsx)(n.z,{size:"sm",className:"flex-1",onClick:()=>P(h.url),children:b.undressAI.continueEdit})]})]})}):(0,l.jsxs)("div",{className:"mt-2 flex flex-col items-center justify-center",children:[v&&(0,l.jsx)("div",{className:"w-full max-w-[300px] text-center text-sm text-red-500 mb-1",children:"High volume, extra processing time needed"}),(0,l.jsx)(d,{value:w,className:"w-full"}),(0,l.jsxs)("div",{className:"mt-3 flex flex-row items-center justify-center",children:[(0,l.jsx)("div",{className:"w-8 h-8 border-t-2 border-b-2 border-primary rounded-full animate-spin"}),(0,l.jsx)("div",{className:"ml-2 text-center text-xl font-bold text-white",children:b.myPhotos.processing})]})]})]})]})})}}}]);